{% extends "base.html" %}
{% block title %}Supervisión de Agendas | CESFAM{% endblock %}
{% block content %}
<div class="container py-4">
  <h2 class="mb-4"><i class="fa fa-calendar-alt text-info me-2"></i> Supervisión Global de Agendas</h2>
  <form method="get" class="mb-3">
    <div class="row g-2 align-items-end">
      <div class="col-auto">
        <label for="profesional" class="form-label">Filtrar por profesional:</label>
      </div>
      <div class="col-auto">
        <select name="profesional" id="profesional" class="form-select" onchange="this.form.submit()">
          <option value="">Todos</option>
          {% for p in profesionales %}
            <option value="{{ p.id_profesional }}" {% if profesional_id == p.id_profesional|stringformat:'s' %}selected{% endif %}>{{ p.nombre }}</option>
          {% endfor %}
        </select>
      </div>
    </div>
  </form>
  {% if horarios %}
    <ul class="list-group mb-4">
      {% for h in horarios %}
        <li class="list-group-item">
          <b>Profesional:</b> {{ h.profesional.nombre }}<br>
          <b>Día:</b> {{ h.dia }}<br>
          <b>Hora inicio:</b> {{ h.hora_inicio }}<br>
          <b>Hora fin:</b> {{ h.hora_fin }}<br>
          {% if h.bloqueado %}<span class="badge bg-danger">Bloqueado</span>{% endif %}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-info">No hay horarios registrados.</div>
  {% endif %}
  <a href="/dashboard" class="btn btn-gradient-dark mt-3"><i class="fa fa-arrow-left"></i> Volver al panel</a>
</div>
{% endblock %}
